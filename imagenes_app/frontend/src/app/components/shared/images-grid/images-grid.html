<div class="images-grid-container">
  
  <!-- Loading state -->
  <div *ngIf="loading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>{{ loadingMessage }}</p>
  </div>

  <!-- Error state -->
  <div *ngIf="error" class="error-state">
    <div class="error-icon">❌</div>
    <h3>Error al cargar imágenes</h3>
    <p>{{ error }}</p>
    <button class="btn btn-retry" (click)="onReload()">Intentar de nuevo</button>
  </div>

  <!-- Empty state when no search performed -->
  <div *ngIf="!loading && !error && !searchPerformed && images.length === 0" class="empty-state">
    <div class="empty-icon">🔍</div>
    <h3>{{ emptyStateTitle }}</h3>
    <p>{{ emptyStateMessage }}</p>
    
    <!-- Additional instructions for audit page -->
    <div *ngIf="pageType === 'audit'" class="search-instructions">
      <h4>📋 Opciones Disponibles:</h4>
      <ul>
        <li><strong>🔄 {{ reloadButtonText }}:</strong> Obtiene TODAS las imágenes sin revisar del blob storage (sin filtros)</li>
        <li><strong>🔍 Buscar:</strong> Busca imágenes con filtros específicos</li>
      </ul>
    </div>
  </div>

  <!-- Empty state when search performed but no results -->
  <div *ngIf="!loading && !error && searchPerformed && images.length === 0" class="empty-state">
    <div class="empty-icon">🔍</div>
    <h3>No se encontraron imágenes</h3>
    <p>No hay imágenes que coincidan con los filtros aplicados.</p>
  </div>

  <!-- Images section -->
  <div *ngIf="!loading && !error && images.length > 0" class="images-section">
    <div class="results-info">
      <span class="results-count">{{ images.length }} imágenes encontradas</span>
      <div class="filters-info" *ngIf="hasActiveFilters()">
        <span class="filter-badge" *ngIf="activeFilters.faculty">📚 {{ activeFilters.faculty }}</span>
        <span class="filter-badge" *ngIf="activeFilters.studyType">🎓 {{ activeFilters.studyType }}</span>
      </div>
    </div>

    <div class="images-grid">
      <app-image-card
        *ngFor="let image of images; trackBy: trackByImageId"
        [image]="image"
        [cardType]="getCardType()"
        [showEvaluateButton]="showEvaluateButton"
        (cardClick)="onImageClick($event)"
        (evaluateClick)="onImageEvaluate($event)">
      </app-image-card>
    </div>
  </div>

</div>
